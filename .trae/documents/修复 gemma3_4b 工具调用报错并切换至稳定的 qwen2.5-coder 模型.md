非常抱歉，看来 `gemma3:4b` 在当前的 Ollama 版本中对原生 `tools` 接口（函数调用）的支持还存在问题，导致了 `400 Bad Request` 错误。

为了解决这个问题并确保您的智能农业助手能正常工作，我建议切换回对工具调用支持极其稳定的 **`qwen2.5-coder:latest`**。

**实施步骤：**
1.  **修改 `.env` 配置文件**：
    *   将 `MODEL` 字段的值从 `gemma3:4b` 修改回 `qwen2.5-coder:latest`（根据您的 `ollama list` 显示您已经安装了此模型）。
2.  **验证逻辑**：
    *   `qwen2.5-coder` 拥有更强的逻辑推理能力，能更精准地生成符合格式的“智能农业决策报告”。

**预期效果：**
修改后，AI 将能正常调用天气、传感器等工具，并以专业的农业专家身份为您提供详尽的决策建议，不会再出现 API 报错。