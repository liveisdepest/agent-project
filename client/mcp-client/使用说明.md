# 智能农业决策助手 - 使用说明

## 问题修复

### 之前的问题
- IoT 传感器数据日志不断刷屏：`INFO:__main__:[IoT] 收到数据...`
- 无法看到输入提示符，无法正常对话

### 已修复
1. **降低了 irrigation 服务器的日志级别**
   - 从 `INFO` 改为 `WARNING`
   - 传感器数据接收日志改为 `DEBUG` 级别
   - 现在不会再刷屏了

2. **优化了对话界面**
   - 添加了清晰的启动提示
   - 使用更明显的分隔线和 emoji
   - 添加了空输入检查
   - 支持 Ctrl+C 优雅退出

## 使用方法

### 启动程序
```bash
cd client/mcp-client
python client.py
```

### 交互命令
- **正常提问**：直接输入你的问题，例如：
  - "曲靖今天天气怎么样？玉米需要灌溉吗？"
  - "查看当前传感器数据"
  - "开启水泵"
  
- **清空历史**：输入 `clear` 清空对话历史
- **退出程序**：输入 `exit` 或按 `Ctrl+C`

### 示例对话
```
🤔 您的问题: 曲靖今天天气怎么样？玉米需要灌溉吗？

[AI 会自动调用工具获取天气和传感器数据，然后给出灵活的建议]

根据刚才获取的数据，曲靖目前气温11.5°C，天气晴朗。但是传感器显示
土壤湿度为0%，这是一个非常严重的缺水信号...
```

## 注意事项

1. **传感器数据仍在后台接收**，只是不再显示日志
2. **如需查看详细日志**，可以修改 `server/irrigation/irrigation.py` 第 9 行：
   ```python
   logging.basicConfig(level=logging.DEBUG)  # 显示所有日志
   ```
3. **水泵控制需要确认**：当 AI 建议开启/关闭水泵时，会要求你确认

## 提示

- 现在的 AI 回复更加灵活自然，不再是固定模板
- AI 会根据情况调整语气（紧急时更果断，正常时更详细）
- 所有决策都基于实时数据，不会瞎猜
